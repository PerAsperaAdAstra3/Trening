<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<script src="../../scripts/jquery-3.2.1.min.js"></script>
<script src="../../scripts/bootstrap.min.js"></script>
<script src="../../scripts/functions.js"></script>
<meta charset="UTF-8"/>
<title>Treninzi</title>
<link rel="stylesheet" type="text/css" th:href="@{/css/bootstrap.min.css}"/>
<link rel="stylesheet" type="text/css" th:href="@{/css/style.css}"/>
<script>
	$(document).on("click", "#tr-entity-list", function(event) {
		highlightRow(this)
	});
	
	$(document).on("click", "#search", function(event) {
		$("#hidden_input").css('display','table-row');
	});
	
	$(window).scroll(function() {
		  sessionStorage.scrollTop = $(this).scrollTop();
		});

		$(document).ready(function() {
		  if (sessionStorage.scrollTop != "undefined") {
		    $(window).scrollTop(sessionStorage.scrollTop);
		  }
	});

	function sync(item){
		name = item.find(".clientName").html()
	    familyName = item.find(".clientFamilyName").html()
	    id = item.find(".clientId").html()
	    $("#name").val(name);
	    $("#familyName").val(familyName);
	    $("#id").val(id);
	}
	
/*<![CDATA[*/	
	function filterModal(typeToFilter) {
		  var input, filter, table, tr, td, i, j;
		  
		 	if (typeToFilter === 0) {
			  input = document.getElementById("inputFilterDate");
		        j = 0;
		    } else if (typeToFilter === 1){
		    	 input = document.getElementById("inputFilterNumberOfTrainings");
		    	j = 1;
		    } else if (typeToFilter === 2){
		  	  input = document.getElementById("inputFilterClientName");
		    	j = 2;
		    } else if (typeToFilter === 3){
			  	  input = document.getElementById("inputFilterFamilyName");
			    	j = 3;
		    }
		 	
		  filter = input.value.toUpperCase();
		  table = document.getElementById("training");
		  tr = table.getElementsByTagName("tr");
		  for (i = 0; i < tr.length; i++) {
		    td = tr[i].getElementsByTagName("td")[j];
		    if (td) {
		      if (td.innerHTML.toUpperCase().indexOf(filter) > -1) {
		        tr[i].style.display = "";
		      } else {
		        tr[i].style.display = "none";
		      }
		    }       
		  }
		}

/*]]>*/
</script>
</head>
<body class="gradient">
	<div class="alert div1" role="alert">
		<a href="/" class="home">Početna</a>
		<h1 align="center">Treninzi u sistemu</h1>
	</div>
	<a style="padding-left:3em" th:href="@{/addTrainingToClient}"><button class="btn btn-success">Kreiraj trening</button></a>
	<br/>
	<br/>
	<br/>
<form method="POST">
<div style="padding-left:3em">
	<p><b> Filtriranje: </b></p>
		<input type="text" id="inputFilterDate" onkeyup="filterModal(0)" placeholder="Filtriranje po datumu.."/>
		<input type="text" id="inputFilterNumberOfTrainings" onkeyup="filterModal(1)" placeholder="Filtriranje po broju treninga.."/>
		<input type="text" id="inputFilterClientName" onkeyup="filterModal(2)" placeholder="Filtriranje po imenu.."/>
		<input type="text" id="inputFilterFamilyName" onkeyup="filterModal(3)" placeholder="Filtriranje po prezimenu.."/>
	<br/>
	<br/>
	<br/>
</div>
<table id="training" class="table table-hover">
	<thead>
		<tr>
			<th scope="col">Datum</th>
			<th scope="col">Redni broj</th>
			<th scope="col">Ime klijenta</th>
			<th scope="col">Prezime klijenta</th>
			<th scope="col"></th>
		</tr>
	</thead>	
	<tbody>
		<tr	id="tr-entity-list" th:each = "training : ${trainings}">
			<td scope="row" class="clientId" th:utext="${training.date}"></td>
			<td class="trainingNumberOfTra" th:utext="${training.numberOfTrainings}"></td>
			<td class="trainingClientName" th:utext="${training.client}"></td>
			<td class="trainingClientName" th:utext="${training.clientFamilyName}"></td>
			<td class="trainingId" th:utext="${training.id}" style="display:none;"></td>
			<td><a th:href="@{/getTraining/{id}/(id=${training.id})}"><button type="button" class="btn btn-success">Izmeni</button></a></td>
			<td><a th:href="@{/deleteTraining/{id}/(id=${training.id})}"><button type="button" class="btn btn-danger">Briši</button></a></td>
		</tr>
	</tbody>
</table>
</form>
</body>
</html>